!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Eta={})}(this,(function(e){"use strict";var t=new Function("return this;")().Promise;function r(e,t,r){for(var n in t)a=t,o=n,Object.prototype.hasOwnProperty.call(a,o)&&(e[n]=t[n]);var a,o;return e}var n={"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;"};function a(e){return n[e]}function o(e,t){var r=[],n=!1,a=0;function o(e,a){if(e){var o=e.replace(/\\|'/g,"\\$&");(o=(o=function(e,t,r,n){var a,o;return"string"==typeof t.autoTrim?a=o=t.autoTrim:Array.isArray(t.autoTrim)&&(a=t.autoTrim[1],o=t.autoTrim[0]),(r||!1===r)&&(a=r),(n||!1===n)&&(o=n),"slurp"===a&&"slurp"===o?e.trim():("_"===a||"slurp"===a?e=String.prototype.trimLeft?e.trimLeft():e.replace(/^[\s\uFEFF\xA0]+/,""):"-"!==a&&"nl"!==a||(e=e.replace(/^(?:\n|\r|\r\n)/,"")),"_"===o||"slurp"===o?e=String.prototype.trimRight?e.trimRight():e.replace(/[\s\uFEFF\xA0]+$/,""):"-"!==o&&"nl"!==o||(e=e.replace(/(?:\n|\r|\r\n)$/,"")),e)}(o,t,n,a)).replace(/\n/g,"\\n").replace(/\r/g,"\\r"))&&r.push(o)}}var i="";t.parse.exec&&(i&&(i+="|"),i+=t.parse.exec),t.parse.interpolate&&(i&&(i+="|"),i+=t.parse.interpolate),t.parse.raw&&(i&&(i+="|"),i+=t.parse.raw);for(var c,s=new RegExp("([^]*?)"+t.tags[0]+"(-|_)?\\s*("+i+")?\\s*((?:[^]*?(?:'(?:\\\\[\\s\\w\"'\\\\`]|[^\\n\\r'\\\\])*?'|`(?:\\\\[\\s\\w\"'\\\\`]|[^\\\\`])*?`|\"(?:\\\\[\\s\\w\"'\\\\`]|[^\\n\\r\"\\\\])*?\"|\\/\\*[^]*?\\*\\/)?)*?)\\s*(-|_)?"+t.tags[1],"g");null!==(c=s.exec(e));){a=c[0].length+c.index;var p=c.index,u=c[1],f=c[2],l=c[3]||"",h=c[4];o(u,f),n=c[5];var g="";l===t.parse.exec?g="e":l===t.parse.raw?g="r":l===t.parse.interpolate&&(g="i"),r.push({t:g,val:h})}if(o(e.slice(a,e.length),!1),t.plugins)for(p=0;p<t.plugins.length;p++){var m=t.plugins[p];m.processAST&&(r=m.processAST(r,t))}return r}function i(e,t){var r=o(e,t),n="var tR='';"+(t.useWith?"with("+t.varName+"||{}){":"")+function(e,t){var r=0,n=e.length,a="";for(;r<n;r++){var o=e[r];if("string"==typeof o){a+="tR+='"+o+"';"}else{var i=o.t,c=o.val||"";"r"===i?a+="tR+="+c+";":"i"===i?(t.autoEscape&&(c="E.e("+c+")"),a+="tR+="+c+";"):"e"===i&&(a+=c+"\n")}}return a}(r,t)+"if(cb){cb(null,tR)} return tR"+(t.useWith?"}":"");if(t.plugins)for(var a=0;a<t.plugins.length;a++){var i=t.plugins[a];i.processFnString&&(n=i.processFnString(n,t))}return n}var c=new(function(){function e(e){this.cache=e}return e.prototype.define=function(e,t){this.cache[e]=t},e.prototype.get=function(e){return this.cache[e]},e.prototype.remove=function(e){delete this.cache[e]},e.prototype.reset=function(){this.cache={}},e.prototype.load=function(e){r(this.cache,e)},e}())({});function s(e){var t,r,n=new Error(e);return t=n,r=s.prototype,Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r,n}function p(e,t){var r=this.templates.get(e);if(!r)throw s('Could not fetch template "'+e+'"');return r(t,this)}s.prototype=Object.create(Error.prototype,{name:{value:"Eta Error",enumerable:!1}});var u={varName:"it",autoTrim:[!1,"nl"],autoEscape:!0,tags:["<%","%>"],parse:{interpolate:"=",raw:"~",exec:""},async:!1,templates:c,cache:!1,plugins:[],useWith:!1,e:function(e){var t=String(e);return/[&<"']/.test(t)?t.replace(/[&<"']/g,a):t},include:p};function f(e,t){var n={};return r(n,u),t&&r(n,t),e&&r(n,e),n}function l(e,t){var r,n=f(t||{});if(n.async)try{r=new Function("return (async function(){}).constructor;")()}catch(e){throw e instanceof SyntaxError?s("This environment doesn't support async/await"):e}else r=Function;try{return new r(n.varName,"E","cb",i(e,n))}catch(t){throw t instanceof SyntaxError?s("Bad template syntax\n\n"+t.message+"\n"+Array(t.message.length+1).join("=")+"\n"+i(e,n)):t}}function h(e,t){var r;return t.cache&&t.name&&t.templates.get(t.name)?t.templates.get(t.name):(r="function"==typeof e?e:l(e,t),t.cache&&t.name&&t.templates.define(t.name,r),r)}p.bind(u),e.compile=l,e.compileToString=i,e.defaultConfig=u,e.getConfig=f,e.parse=o,e.render=function(e,r,n,a){var o=f(n||{});if(!o.async)return h(e,o)(r,o);if(!a){if("function"==typeof t)return new t((function(t,n){try{t(h(e,o)(r,o))}catch(e){n(e)}}));throw s("Please provide a callback function, this env doesn't support Promises")}try{h(e,o)(r,o,a)}catch(e){return a(e)}},e.templates=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=eta.min.js.map
