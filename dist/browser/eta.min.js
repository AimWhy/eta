!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Sqrl={})}(this,(function(e){"use strict";var t=new Function("return this;")().Promise;function r(e,t,r){for(var n in t)o=t,a=n,Object.prototype.hasOwnProperty.call(o,a)&&(e[n]=t[n]);var o,a;return e}var n={"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;"};function o(e){return n[e]}function a(e,t){var r=[],n=!1,o=0;function a(e,o){if(e){var a=e.replace(/\\/g,"\\\\").replace(/'/g,"\\'");a=function(e,t,r,n){var o,a;return"string"==typeof t.autoTrim?o=a=t.autoTrim:Array.isArray(t.autoTrim)&&(o=t.autoTrim[1],a=t.autoTrim[0]),(r||!1===r)&&(o=r),(n||!1===n)&&(a=n),"slurp"===o&&"slurp"===a?e.trim():("_"===o||"slurp"===o?e=String.prototype.trimLeft?e.trimLeft():e.replace(/^[\s\uFEFF\xA0]+/,""):"-"!==o&&"nl"!==o||(e=e.replace(/^(?:\n|\r|\r\n)/,"")),"_"===a||"slurp"===a?e=String.prototype.trimRight?e.trimRight():e.replace(/[\s\uFEFF\xA0]+$/,""):"-"!==a&&"nl"!==a||(e=e.replace(/(?:\n|\r|\r\n)$/,"")),e)}(a,t,n,o),console.log("str to push is"),console.log(a.length),a&&r.push(a)}}var i=[];t.parse.exec&&i.push(t.parse.exec),t.parse.interpolate&&i.push(t.parse.interpolate),t.parse.raw&&i.push(t.parse.raw);for(var s,c=new RegExp("([^]*?)"+t.tags[0]+"(-|_)?\\s*("+i.join("|")+")?\\s*((?:[^]*?(?:'(?:\\\\[\\s\\w\"'\\\\`]|[^\\n\\r'\\\\])*?'|`(?:\\\\[\\s\\w\"'\\\\`]|[^\\\\`])*?`|\"(?:\\\\[\\s\\w\"'\\\\`]|[^\\n\\r\"\\\\])*?\"|\\/\\*[^]*?\\*\\/)?)*?)\\s*(-|_)?"+t.tags[1],"g");null!==(s=c.exec(e));){o=s[0].length+s.index;var p=s.index;console.log(s),console.log("hey");var u=s[1],l=s[2],f=s[3]||"",g=s[4];a(u,l),n=s[5];var h="";f===t.parse.exec?h="e":f===t.parse.raw?h="r":f===t.parse.interpolate&&(h="i"),r.push({t:h,val:g})}if(a(e.slice(o,e.length),!1),t.plugins)for(p=0;p<t.plugins.length;p++){var v=t.plugins[p];v.processAST&&(r=v.processAST(r,t))}return r}function i(e,t){var r=a(e,t),n="var tR='';"+(t.useWith?"with("+t.varName+"||{}){":"")+function(e,t){var r=0,n=e.length,o="";for(;r<n;r++){var a=e[r];if("string"==typeof a){o+="tR+='"+a+"';"}else{var i=a.t,s=a.val||"";"i"===i?o+="tR+="+s+";":"r"===i?o="tR+=E.e("+s+")":"e"===i&&(o+=s)}}return o}(r).replace(/\n/g,"\\n").replace(/\r/g,"\\r")+"if(cb){cb(null,tR)} return tR"+(t.useWith?"}":"");if(t.plugins)for(var o=0;o<t.plugins.length;o++){var i=t.plugins[o];i.processFnString&&(n=i.processFnString(n,t))}return n}var s=function(){function e(e){this.cache=e}return e.prototype.define=function(e,t){this.cache[e]=t},e.prototype.get=function(e){return this.cache[e]},e.prototype.remove=function(e){delete this.cache[e]},e.prototype.reset=function(){this.cache={}},e.prototype.load=function(e){r(this.cache,e)},e}();function c(e){var t,r,n=new Error(e);return t=n,r=c.prototype,Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r,n}c.prototype=Object.create(Error.prototype,{name:{value:"Eta Error",enumerable:!1}});var p=new s({}),u={varName:"it",autoTrim:[!1,"nl"],autoEscape:!0,tags:["{{","}}"],parse:{interpolate:"=",raw:"~",exec:""},async:!1,templates:p,cache:!1,plugins:[],useWith:!1,e:function(e){var t=String(e);return/[&<"']/.test(t)?t.replace(/[&<"']/g,o):t}};function l(e,t){var n={};return r(n,u),t&&r(n,t),e&&r(n,e),n}function f(e,t){var r,n=l(t||{});if(n.async)try{r=new Function("return (async function(){}).constructor;")()}catch(e){throw e instanceof SyntaxError?new Error("This environment doesn't support async/await"):e}else r=Function;try{return new r(n.varName,"E","cb",i(e,n))}catch(t){throw t instanceof SyntaxError?c("Bad template syntax\n\n"+t.message+"\n"+Array(t.message.length+1).join("=")+"\n"+i(e,n)):t}}function g(e,t){var r;return t.cache&&t.name&&t.storage.templates.get(t.name)?t.storage.templates.get(t.name):(r="function"==typeof e?e:f(e,t),t.cache&&t.name&&t.storage.templates.define(t.name,r),r)}e.compile=f,e.compileToString=i,e.defaultConfig=u,e.getConfig=l,e.parse=a,e.render=function(e,r,n,o){var a=l(n||{});if(!a.async)return g(e,a)(r,a);if(!o){if("function"==typeof t)return new t((function(t,n){try{t(g(e,a)(r,a))}catch(e){n(e)}}));throw c("Please provide a callback function, this env doesn't support Promises")}try{g(e,a)(r,a,o)}catch(e){return o(e)}},e.templates=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=eta.min.js.map
