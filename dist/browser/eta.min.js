!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Sqrl={})}(this,(function(e){"use strict";var t=new Function("return this;")().Promise;function r(e,t,r){for(var n in t)a=t,o=n,Object.prototype.hasOwnProperty.call(a,o)&&(e[n]=t[n]);var a,o;return e}var n={"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;"};function a(e){return n[e]}function o(e,t){var r=[],n=!1,a=0;function o(e,a){if(e){var o=e.replace(/\\/g,"\\\\").replace(/'/g,"\\'");(o=function(e,t,r,n){var a,o;return"string"==typeof t.autoTrim?a=o=t.autoTrim:Array.isArray(t.autoTrim)&&(a=t.autoTrim[1],o=t.autoTrim[0]),(r||!1===r)&&(a=r),(n||!1===n)&&(o=n),"slurp"===a&&"slurp"===o?e.trim():("_"===a||"slurp"===a?e=String.prototype.trimLeft?e.trimLeft():e.replace(/^[\s\uFEFF\xA0]+/,""):"-"!==a&&"nl"!==a||(e=e.replace(/^(?:\n|\r|\r\n)/,"")),"_"===o||"slurp"===o?e=String.prototype.trimRight?e.trimRight():e.replace(/[\s\uFEFF\xA0]+$/,""):"-"!==o&&"nl"!==o||(e=e.replace(/(?:\n|\r|\r\n)$/,"")),e)}(o,t,n,a))&&r.push(o)}}var i=[];t.parse.exec&&i.push(t.parse.exec),t.parse.interpolate&&i.push(t.parse.interpolate),t.parse.raw&&i.push(t.parse.raw);for(var s,c=new RegExp("([^]*?)"+t.tags[0]+"(-|_)?\\s*("+i.join("|")+")?\\s*((?:[^]*?(?:'(?:\\\\[\\s\\w\"'\\\\`]|[^\\n\\r'\\\\])*?'|`(?:\\\\[\\s\\w\"'\\\\`]|[^\\\\`])*?`|\"(?:\\\\[\\s\\w\"'\\\\`]|[^\\n\\r\"\\\\])*?\"|\\/\\*[^]*?\\*\\/)?)*?)\\s*(-|_)?"+t.tags[1],"g");null!==(s=c.exec(e));){a=s[0].length+s.index;var p=s.index,u=s[1],f=s[2],l=s[3]||"",g=s[4];o(u,f),n=s[5];var h="";l===t.parse.exec?h="e":l===t.parse.raw?h="r":l===t.parse.interpolate&&(h="i"),r.push({t:h,val:g})}if(o(e.slice(a,e.length),!1),t.plugins)for(p=0;p<t.plugins.length;p++){var m=t.plugins[p];m.processAST&&(r=m.processAST(r,t))}return r}function i(e,t){var r=o(e,t),n="var tR='';"+(t.useWith?"with("+t.varName+"||{}){":"")+function(e,t){var r=0,n=e.length,a="";for(;r<n;r++){var o=e[r];if("string"==typeof o){a+="tR+='"+o+"';"}else{var i=o.t,s=o.val||"";"i"===i?a+="tR+="+s+";":"r"===i?a="tR+=E.e("+s+")":"e"===i&&(a+=s)}}return a}(r).replace(/\n/g,"\\n").replace(/\r/g,"\\r")+"if(cb){cb(null,tR)} return tR"+(t.useWith?"}":"");if(t.plugins)for(var a=0;a<t.plugins.length;a++){var i=t.plugins[a];i.processFnString&&(n=i.processFnString(n,t))}return n}var s=function(){function e(e){this.cache=e}return e.prototype.define=function(e,t){this.cache[e]=t},e.prototype.get=function(e){return this.cache[e]},e.prototype.remove=function(e){delete this.cache[e]},e.prototype.reset=function(){this.cache={}},e.prototype.load=function(e){r(this.cache,e)},e}();function c(e){var t,r,n=new Error(e);return t=n,r=c.prototype,Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r,n}c.prototype=Object.create(Error.prototype,{name:{value:"Eta Error",enumerable:!1}});var p=new s({}),u={varName:"it",autoTrim:[!1,"nl"],autoEscape:!0,tags:["{{","}}"],parse:{interpolate:"=",raw:"~",exec:""},async:!1,templates:p,cache:!1,plugins:[],useWith:!1,e:function(e){var t=String(e);return/[&<"']/.test(t)?t.replace(/[&<"']/g,a):t}};function f(e,t){var n={};return r(n,u),t&&r(n,t),e&&r(n,e),n}function l(e,t){var r,n=f(t||{});if(n.async)try{r=new Function("return (async function(){}).constructor;")()}catch(e){throw e instanceof SyntaxError?new Error("This environment doesn't support async/await"):e}else r=Function;try{return new r(n.varName,"E","cb",i(e,n))}catch(t){throw t instanceof SyntaxError?c("Bad template syntax\n\n"+t.message+"\n"+Array(t.message.length+1).join("=")+"\n"+i(e,n)):t}}function g(e,t){var r;return t.cache&&t.name&&t.storage.templates.get(t.name)?t.storage.templates.get(t.name):(r="function"==typeof e?e:l(e,t),t.cache&&t.name&&t.storage.templates.define(t.name,r),r)}e.compile=l,e.compileToString=i,e.defaultConfig=u,e.getConfig=f,e.parse=o,e.render=function(e,r,n,a){var o=f(n||{});if(!o.async)return g(e,o)(r,o);if(!a){if("function"==typeof t)return new t((function(t,n){try{t(g(e,o)(r,o))}catch(e){n(e)}}));throw c("Please provide a callback function, this env doesn't support Promises")}try{g(e,o)(r,o,a)}catch(e){return a(e)}},e.templates=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=eta.min.js.map
